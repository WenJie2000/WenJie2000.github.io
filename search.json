[{"title":"MySQL重要指令","date":"2021-10-18T16:00:00.000Z","url":"/2021/10/19/%E5%9C%A8sqlbolt%E4%B8%8A%E5%AD%A6%E4%B9%A0SQL/","tags":[["大数据","/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"],["网络基础知识","/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"],["MySQL","/tags/MySQL/"]],"categories":[["大数据工程技术人员培训","/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF%E4%BA%BA%E5%91%98%E5%9F%B9%E8%AE%AD/"]],"content":"在sqlbolt上学习SQL学习网站原网址 (！部分指令该网站不支持！) SQL Lesson 1: SELECT queries 101查询表格中的特定列 查询所有列 Exercise1 — Tasks 1.Find the title of each film 从Movies中找到每个电影的名字(Title) 2.Find the director of each film 找到每个电影的Director 3.Find the title and director of each film 找到每个电影的Title和Director 4.Find the title and year of each film 找到每个电影的Title和Year 5.Find all the information about each film 找到每个电影的所有信息 参考答案 SQL Lesson 2: Queries with constraints (Pt. 1)带约束的选择查询 Operator Condition SQL Example =, !=, &lt; &lt;=, &gt;, &gt;= 标准数值运算符 列 != 4 BETWEEN … AND … 数值在两个值范围内 (包含) 列 BETWEEN 1.5 AND 10.5 NOT BETWEEN … AND … 数值不在两个值范围内 (包含) 列 NOT BETWEEN 1 AND 10 IN (…) 数值在列表中 列 IN (2, 4, 6) NOT IN (…) 数值没在列表中 列 NOT IN (1, 3, 5) Exercise 2 — Tasks 1.Find the movie with a row id of 6 找到Id为6的电影 2.Find the movies released in the years between 2000 and 2010 找到movies中2000到2010年的电影 3.Find the movies not released in the years between 2000 and 2010 找到movies中没在2000到2010年的电影 4.Find the first 5 Pixar movies and their release year 找到最早的5个皮克斯电影和它们的年份 参考答案 SQL Lesson 3: Queries with constraints (Pt. 2) Operator Condition Example = 区分大小写的字符串精确比较 (注意单个的相等) 列 = “abc” != or &lt;&gt; 区分大小写的字符串不等精确比较 列 != “abcd” LIKE 不区分大小写的精确字符串比较 列 LIKE “ABC” NOT LIKE 不区分大小写的精确字符串不等比较 列 NOT LIKE “ABCD” % 用于字符串中的任意位置，以匹配由零个或多个字符组成的序列 (只和 LIKE 或 NOT LIKE 同时使用) 列 LIKE “%AT%” (matches “AT”, “ATTIC”, “CAT” or even “BATS”) _ 用于字符串中的任意位置匹配单个字符 (只和 LIKE 或 NOT LIKE 同时使用) 列 LIKE “AN_” (matches “AND”, but not “AN”) IN (…) 字符串存在于列表中 列 IN (“A”, “B”, “C”) NOT IN (…) 字符串不在列表中 列 NOT IN (“D”, “E”, “F”) 带约束的选择查询 Exercise 3 — Tasks 1.Find all the Toy Story movies 找到所有的Toy Story电影 2.Find all the movies directed by John Lasseter 找到所有由John Lasseter导演的电影 3.Find all the movies (and director) not directed by John Lasseter 找到所有的不是John Lasseter导演的不是电影（和Director） 4.Find all the WALL-* movies 找到所有的WALL-*电影 参考答案 SQL Lesson 4: Filtering and sorting Query results唯一结果的选择查询 带有有序结果的选择查询 限制行的选择查询 Exercise 4 — Tasks 1.List all directors of Pixar movies (alphabetically), without duplicates 列出所有的皮克斯电影的directors（照字母顺序排列），没有重复 2.List the last four Pixar movies released (ordered from most recent to least) 列出最近上映的四部皮克斯电影（从最近源到最早） 3.List the first five Pixar movies sorted alphabetically 按字母顺序列出皮克斯的前五部电影 4.List the next five Pixar movies sorted alphabetically 按字母顺序列出皮克斯5到10部电影 参考答案 SQL Review: Simple SELECT Queries选择查询 Review 1 — Tasks 1.List all the Canadian cities and their populations 列出所有加拿大城市（City）及其人口(Population) 2.Order all the cities in the United States by their latitude from north to south 按照从北到南的纬度把美国所有的城市排序 3.List all the cities west of Chicago, ordered from west to east 列出芝加哥以西的所有城市，按从西到东的顺序 4.List the two largest cities in Mexico (by population) 列出墨西哥最大的两个城市(按人口分) 5.List the third and fourth largest cities (by population) in the United States and their population 列出美国第三和第四大城市(按人口)及其人口 注：Latitude 纬度， Longitude 经度 参考答案 SQL Lesson 6: Multi-table queries with JOINs在多个表上使用INNER JOIN选择查询 Exercise 6 — Tasks 1.Find the domestic and international sales for each movie 找出每部电影(Title)在国内和国际上的销售情况(Domestic_sales,International_sales) 2.Show the sales numbers for each movie that did better internationally rather than domestically 展示每一部在国际(International_sales)上比在国内(Domestic_sales)销量更好的电影 3.List all the movies by their ratings in descending order 把所有的电影按评分（Rating）降序排列 参考答案 SQL Lesson 7: OUTER JOINs在多个表上使用左/右/全连接选择查询 Exercise 7 — Tasks 1.Find the list of all buildings that have employees 找到所有有员工的建筑列表 2.Find the list of all buildings and their capacity 找到所有建筑及其Capacity的列表 3.List all buildings and the distinct employee roles in each building (including empty buildings) 列出所有建筑和每个建筑中不同的员工职责(role)(包括空的建筑) 参考答案 SQL Lesson 8: A short note on NULLs对NULL值有约束的选择查询 Exercise 8 — Tasks 1.Find the name and role of all employees who have not been assigned to a building 查找所有尚未分配到大楼的员工的名字和职责 2.Find the names of the buildings that hold no employees 找出没有员工的大楼的名字 参考答案 SQL Lesson 9: Queries with expressions带有表达式的查询示例 Select query with expression aliases Example query with both column and table name aliases Exercise 9 — Tasks 1.List all movies and their combined sales in millions of dollars 列出所有电影及其总销售额（以百万美元计） 2.List all movies and their ratings in percent 列出所有电影及其收视率（使用百分比） 3.List all movies that were released on even number years (domestic_sales + international_sales)表示国内外销售总额 参考答案 SQL Lesson 10: Queries with aggregates (Pt. 1)Select query with aggregate functions over all rows Function Description COUNT(***)**, COUNT(column) A common function used to counts the number of rows in the group if no column name is specified. Otherwise, count the number of rows in the group with non-NULL values in the specified column. MIN(column) Finds the smallest numerical value in the specified column for all rows in the group. MAX(column) Finds the largest numerical value in the specified column for all rows in the group. **AVG(**column) Finds the average numerical value in the specified column for all rows in the group. SUM(column) Finds the sum of all numerical values in the specified column for the rows in the group. Exercise 10 — Tasks 1.Find the longest time that an employee has been at the studio 2.For each role, find the average number of years employed by employees in that role 3.Find the total number of employee years worked in each building 参考答案 SQL Lesson 11: Queries with aggregates (Pt. 2)Select query with HAVING constraint Exercise 11 — Tasks 1.Find the number of Artists in the studio (without a HAVING clause) 2.Find the number of Employees of each role in the studio 3.Find the total number of years employed by all Engineers 参考答案 SQL Lesson 12: Order of execution of a QueryComplete SELECT query Exercise 12 — Tasks 1.Find the number of movies each director has directed 2.Find the total domestic and international sales that can be attributed to each director 参考答案 SQL Lesson 13: Inserting rowsInsert statement with values for all columns Insert statement with specific columns Exercise 13 — Tasks 1.Add the studio’s new production, Toy Story 4 to the list of movies (you can use any director) 2.Toy Story 4 has been released to critical acclaim! It had a rating of 8.7, and made 340 million domestically and 270 million internationally. Add the record to the BoxOffice table. 参考答案 SQL Lesson 14: Updating rowsUpdate statement with values Exercise 14 — Tasks 1.The director for A Bug's Life is incorrect, it was actually directed by John Lasseter 2.The year that Toy Story 2 was released is incorrect, it was actually released in 1999 3.Both the title and director for Toy Story 8 is incorrect! The title should be \"Toy Story 3\" and it was directed by Lee Unkrich 参考答案 SQL Lesson 15: Deleting rows带条件的删除语句 Exercise 15 — Tasks 1.This database is getting too big, lets remove all movies that were released before 2005. 这个数据库太大了，让我们删除所有2005年之前上映的电影。 2.Andrew Stanton has also left the studio, so please remove all movies directed by him. Andrew Stanton也离开了工作室，所以请删除他执导的所有电影。 参考答案 SQL Lesson 16: Creating tables创建带有可选表格约束和默认值的表格语句 Table data types Data type Description INTEGER, BOOLEAN The integer datatypes can store whole integer values like the count of a number or an age. In some implementations, the boolean value is just represented as an integer value of just 0 or 1. FLOAT, DOUBLE, REAL The floating point datatypes can store more precise numerical data like measurements or fractional values. Different types can be used depending on the floating point precision required for that value. CHARACTER(num_chars), VARCHAR(num_chars), TEXT The text based datatypes can store strings and text in all sorts of locales. The distinction between the various types generally amount to underlaying efficiency of the database when working with these columns.Both the CHARACTER and VARCHAR (variable character) types are specified with the max number of characters that they can store (longer values may be truncated), so can be more efficient to store and query with big tables. DATE, DATETIME SQL can also store date and time stamps to keep track of time series and event data. They can be tricky to work with especially when manipulating data across timezones. BLOB Finally, SQL can store binary data in blobs right in the database. These values are often opaque to the database, so you usually have to store them with the right metadata to requery them. Docs: MySQL, Postgres, SQLite, Microsoft SQL Server Table constraints Constraint Description PRIMARY KEY This means that the values in this column are unique, and each value can be used to identify a single row in this table. AUTOINCREMENT For integer values, this means that the value is automatically filled in and incremented with each row insertion. Not supported in all databases. UNIQUE This means that the values in this column have to be unique, so you can’t insert another row with the same value in this column as another row in the table. Differs from the PRIMARY KEY in that it doesn’t have to be a key for a row in the table. NOT NULL This means that the inserted value can not be NULL. CHECK (expression) This allows you to run a more complex expression to test whether the values inserted are valid. For example, you can check that values are positive, or greater than a specific size, or start with a certain prefix, etc. FOREIGN KEY This is a consistency check which ensures that each value in this column corresponds to another value in a column in another table. For example, if there are two tables, one listing all Employees by ID, and another listing their payroll information, the FOREIGN KEY can ensure that every row in the payroll table corresponds to a valid employee in the master Employee list. An example Exercise 16 — Tasks 1.Create a new table named Database with the following columns: -Name A string (text) describing the name of the database -Version A number (floating point) of the latest version of this database -Download_count An integer count of the number of times this database was downloaded This table has no constraints. SQL Lesson 17: 修改表添加列修改表以添加新列 ALTER TABLE 表名 ADD 列名 数据类型 可选表格约束 DEFAULT 缺省值; 移除列修改表以删除列 ALTER TABLE 表名 DROP 列名; 重命名表更改表名 ALTER TABLE 表名 RENAME TO 新表名; Exercise 17 — Tasks 1.Add a column named **Aspect_ratio** with a **FLOAT** data type to store the aspectratio each movie was released in. 添加一个名为 Aspect _ ratio 的列，该列具有 FLOAT 数据类型，用于存储年发布的每部电影的 Aspect-ratio。 2.Add another column named **Language** with a **TEXT** data type to store the language that the movie was released in. Ensure that the default for this language is **English**. 添加另一个名为 Language 的带有 TEXT 数据类型的列，以存储电影发行的语言。确保此语言的默认值为英语。 "},{"title":"测试","date":"2021-10-09T20:25:28.000Z","url":"/2021/10/10/%E6%B5%8B%E8%AF%95/","categories":[["undefined",""]],"content":"链接 萨顶顶 "}]